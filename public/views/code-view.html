<!--- ========= Code View ========= -->

<div class="col-sm-8 codeView">
  <form class="" name="codeView">
    <div class="row-align">
      <input type="file" id="fileinput" name="model_upload" accept=".rdr">
      <button type="button" class="btn btn-default" ng-click="uploadCode(event)">Upload File</button>
      <button type="button" class="btn btn-default" ng-click="formToCode()">Upload Form</button>
    </div>
    <div class="row-align">
      <input type="text" id="id-to-upload" value="Model id" ng-model="$parent.modelId">
      <button type="button" class="btn btn-default" ng-click="uploadWithId()">Upload With Id</button>
    </div>

    <div id="editor" ng-model="uploadedModel"></div>
  </form>

<!--- ========= Code Handler ========= -->
  <br></br>
  <button type="button" class="btn btn-default" ng-click="saveModel()">Save</button>
  <a id="download-btn"><button type="button" class="btn btn-default" ng-click="downloadModel()">Download</button></a>
  <button type="button" class="btn btn-default" ng-click="parseModel(codeView.$valid)">Parse</button>
  <button type="button" class="btn btn-default" ng-click="solveModel(codeView.$valid)">Solve</button>
  <button type="button" class="btn btn-default" ng-click="saveModel()">Get Shareable Id</button>

  <div id="submitButton" class="alert alert-warning alert-dismissable" ng-show="submitOnInvalid" dismiss-on-timeout="5000">
    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    <strong>Invalid form: </strong> Please fill in missing value(s).
  </div>
  <div id="successParse" class="alert alert-success alert-dismissable" ng-show="submitSuccess" dismiss-on-timeout="5000">
    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    Model parsed successfully.
  </div>
  <div id="shareableId" class="alert alert-success alert-dismissable" ng-show="idSuccess" dismiss-on-timeout="5000">
    <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    Shareable id is {{modelId}}
  </div>

</div>

<!--- ========= How To Code ========= -->

<div class="col-sm-4 codeView">
  <div id="vgraph">

  </div>
  <!-- <h3>How To</h3>

  <p>Cost Benefit Analysis Example</p>

  <pre>
Model CBA;

Objective Max ENB = EV(NB);
Objective Min LP = Pr(NB < 0);
NB = Benefit - Cost;

Benefit = decision("Architecture choice"){
"As-is": normalCI(0.9, 1.1);
"Refactoring" : normalCI(1, 9);
}

Cost = decision("Architecture choice"){
"As-is" : normalCI(0, 0);
"Refactoring" : normalCI(1, 5);
}
  </pre> -->
</div>

</div>

<script type="text/javascript">
  // Initialise Ace editor
  var editor = ace.edit("editor");
  editor.setTheme("ace/theme/tomorrow");
  editor.getSession().setMode("ace/mode/java");
  editor.setOptions({
        autoScrollEditorIntoView: true,
        maxLines: Infinity
    });
  editor.renderer.setScrollMargin(10, 10, 10, 10);
  editor.$blockScrolling = Infinity;
</script>
